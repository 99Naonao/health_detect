import{a0 as t,E as s,a1 as e,n as o,ac as i,H as r,i as a,w as l,j as h,o as p,k as n,$ as c,l as d,t as u,p as f,C as g,m as k,q as y}from"./index-BNfv6lMe.js";import{p as m,h as w,a as T,m as _}from"./physicalResult.CY-ssk5K.js";import{i as x}from"./index.BdQ0JTuP.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=C({components:{physicalResult:m,happyResult:w,progressBar:T,moreDesc:_},data:()=>({lastCreateTime:"2024",current:0,showInfo:!1,riskToopTipLeft:0,riskTips:"轻度风险",riskColor:"#f2b329",hrreport:{},data__:{},gaugeData:[{value:60,name:"score",title:{offsetCenter:["00%","30%"]},detail:{valueAnimation:!0,offsetCenter:["0%","00%"]}}],totalOption:{series:[{type:"gauge",startAngle:0,endAngle:-360,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!0,clip:!1,itemStyle:{color:"#ffaa00",borderWidth:1,borderColor:"#ffaa00"}},axisLine:{lineStyle:{width:15}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!0},axisLabel:{show:!1,distance:50},data:{},title:{fontSize:14},detail:{width:50,height:14,fontSize:34,color:"inherit",borderColor:"inherit",borderRadius:20,borderWidth:0,formatter:"{value}"}}]},text:"",text2:"",showIntro:!0,showFloatBtn:!1,showRightBtn:!0,showPupoBtn:!1}),onShow(){t({title:"请求中"}),this.resultLists()},mounted(){},methods:{startTest(){this.showIntro=!1},resultLists(){this.text="123456",s({page_no:1,page_size:1}).then((t=>{console.log("res.res:res",t),this.text2=t;const{physiologyscorereport:s,afreport:o,bpreport:i,essentialreport:r,healthScoreReport:a,hrreport:l,riskreport:h,spo2hreport:p,calculatedReport:n}=t.lists[0].result;this.hrreport=l,this.afreport=o,this.bpreport=i,this.spo2hreport=p,this.riskreport=h,this.essentialreport=r,this.physiologyscorereport=s,this.lastCreateTime=t.lists[0].create_time,this.showInfo=!0,this.data__=t.lists[0].result;let c=this.physiologyscorereport.data;c>=100?(c=100,this.riskTips="低风险",this.riskColor="#f26f29"):c>=90?(this.riskTips="低风险",this.riskColor="#f26f29"):c>=80?(this.riskTips="中低风险",this.riskColor="#f2b329"):c>=70?(this.riskTips="中风险",this.riskColor="#e2c93e"):c>=60?(this.riskTips="中高风险",this.riskColor="#acea6f"):(this.riskTips="高风险",this.riskColor="#7cc4c8"),this.riskToopTipLeft=c+"%",console.log("this.riskc:",this.riskColor),this.$nextTick((()=>{var t=x(this.$refs.charts1);this.totalOption.series[0].data=this.gaugeData,this.gaugeData[0].value=this.physiologyscorereport.data,t.setOption(this.totalOption),console.log("chart:",t),e()}))}))},swipeTab(t){1==t&&(this.showPupoBtn=!0),this.current=t,this.$nextTick((()=>{this.$refs.resultView.scrollTo({top:0,behavior:"smooth"})}))},goToScale(){o({url:"/pages/healthtest/topic"})},goToSave(){t({title:"保存中"}),setTimeout((()=>{e(),o({url:"/pages/health/health"})}),1500)},async initHappyData(t){},async initLastData(t){let s=t.contentDetail,o=await i(s);const{physiologyscorereport:r,afreport:a,bpreport:l,essentialreport:h,healthScoreReport:p,hrreport:n,riskreport:c,spo2hreport:d,calculatedReport:u}=o;this.hrreport=n,this.afreport=a,this.bpreport=l,this.spo2hreport=d,this.riskreport=c,this.essentialreport=h,this.physiologyscorereport=r,this.lastCreateTime=t.createAt,this.showInfo=!0,this.data__=o;let f=this.physiologyscorereport.data;f>=100?(f=100,this.riskTips="低风险",this.riskColor="#f26f29"):f>=90?(this.riskTips="低风险",this.riskColor="#f26f29"):f>=80?(this.riskTips="中低风险",this.riskColor="#f2b329"):f>=70?(this.riskTips="中风险",this.riskColor="#e2c93e"):f>=60?(this.riskTips="中高风险",this.riskColor="#acea6f"):(this.riskTips="高风险",this.riskColor="#7cc4c8"),this.riskToopTipLeft=f+"%",console.log("this.riskc:",this.riskColor),console.log("report:",o),this.$nextTick((()=>{var t=x(this.$refs.charts1);this.totalOption.series[0].data=this.gaugeData,this.gaugeData[0].value=this.physiologyscorereport.data,t.setOption(this.totalOption),console.log("chart:",t),e()}))},handleResultScroll(t){const s=t.target;s.scrollTop+s.clientHeight>=s.scrollHeight-10?this.showFloatBtn=!0:this.showFloatBtn=!1}}},[["render",function(t,s,e,o,i,m){const w=h,T=y,_=r("happy-result"),x=r("physical-result");return p(),a(w,{class:"container"},{default:l((()=>[n(w,{class:"tab flex",style:{position:"relative"}},{default:l((()=>[n(w,{class:c(["tabitem",{active:0==i.current}]),onClick:s[0]||(s[0]=t=>m.swipeTab(0))},{default:l((()=>[n(w,{class:""},{default:l((()=>[d(" 生理测量报告 ")])),_:1}),0==i.current?(p(),a(w,{key:0,class:"timestamp"},{default:l((()=>[d(u(i.lastCreateTime),1)])),_:1})):f("",!0)])),_:1},8,["class"]),n(w,{class:c(["tabitem",{active:1==i.current}]),onClick:s[1]||(s[1]=t=>m.swipeTab(1))},{default:l((()=>[n(w,{class:""},{default:l((()=>[d("情绪测量报告")])),_:1}),1==i.current?(p(),a(w,{key:0,class:"timestamp"},{default:l((()=>[d(u(i.lastCreateTime),1)])),_:1})):f("",!0)])),_:1},8,["class"]),n(w,{style:{position:"absolute",right:"0px",top:"5px","z-index":"99"}},{default:l((()=>[n(T,{src:"https://oss.zsyl.cc/uploads/images/20250613/20250613091656241580458.png",style:{width:"80px",height:"80px"}})])),_:1})])),_:1}),i.showInfo?(p(),a(w,{key:0,class:"result"},{default:l((()=>[g("div",{class:"conttt",ref:"resultView",onScroll:s[3]||(s[3]=(...t)=>m.handleResultScroll&&m.handleResultScroll(...t))},[1==i.current?(p(),a(w,{key:0,class:""},{default:l((()=>[n(_,{result:i.data__},null,8,["result"]),n(w,{class:"",style:{"letter-spacing":"9px","box-shadow":"none",background:"none",margin:"30rpx","border-radius":"40rpx"}},{default:l((()=>[i.showIntro?(p(),a(w,{key:0,style:{width:"100%",margin:"0 auto"}},{default:l((()=>[n(w,{style:{width:"100%"}},{default:l((()=>[n(T,{src:"https://oss.zsyl.cc/uploads/images/20250630/202506301447555072a5144.png",style:{width:"100%",height:"100%"},mode:"widthFix"})])),_:1})])),_:1})):f("",!0)])),_:1}),n(w,{style:{display:"flex",margin:"30rpx"}},{default:l((()=>[n(w,{class:"float-btn",style:{bottom:"70px",width:"49%"},onClick:m.goToSave},{default:l((()=>[d(" 放弃评估，保存结果 ")])),_:1},8,["onClick"]),n(w,{class:"float-btn",style:{bottom:"70px",width:"49%","margin-left":"auto"},onClick:m.goToScale},{default:l((()=>[d(" 填写匹兹堡睡眠质量问卷 ")])),_:1},8,["onClick"])])),_:1})])),_:1})):(p(),a(w,{key:1,class:"",style:{}},{default:l((()=>[n(x,{result:i.data__},null,8,["result"]),n(w,{class:"",style:{"letter-spacing":"9px","box-shadow":"none",background:"none",margin:"30rpx","border-radius":"40rpx"}},{default:l((()=>[i.showIntro?(p(),a(w,{key:0,style:{width:"100%",margin:"0 auto"},onClick:s[2]||(s[2]=k((t=>i.current=1),["stop"]))},{default:l((()=>[n(w,{style:{width:"100%",height:"400rpx"}},{default:l((()=>[n(T,{src:"https://oss.zsyl.cc/uploads/images/20250623/20250623105209307d16280.png",style:{width:"100%",height:"100%"},mode:"widthFix"})])),_:1})])),_:1})):f("",!0)])),_:1})])),_:1}))],544)])),_:1})):f("",!0)])),_:1})}],["__scopeId","data-v-a9d24a48"]]);export{b as default};
